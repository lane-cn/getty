<html>
<body>
	<h1>Web Socket Sample</h1>
	<script type="text/javascript">
		// establish the communication channel over a websocket
		var ws = new WebSocket("ws://localhost:1025/test.ws");
		 
		// called when socket connection established
		ws.onopen = function() {
		    appendLog("Connected to service! Press 'Start' to get info.");
		};
		 
		// called when a message received from server
		ws.onmessage = function (evt) {
		    appendLog(evt.data)
		};
		 
		// called when socket connection closed
		ws.onclose = function() {
		    appendLog("Disconnected from service!")
		};
		 
		// called in case of an error
		ws.onerror = function(err) {
		    console.log("ERROR!", err )
		};
		 
		// appends logText to log text area
		function appendLog(logText) {
		    var log = document.getElementById("log");
		    log.value = log.value + logText + "\n"
		}
		 
		// sends msg to the server over websocket
		function sendToServer(msg) {
		    ws.send(msg);
		}
	</script>
	
	<button onclick="sendToServer('start')">Start</button>
	<button onclick="sendToServer('stop')">Stop!</button><br/><br/>
	<textarea id="log" rows="20" cols="90"></textarea>
</body>
</html>
